\documentclass[aspectratio=169]{beamer}
\usepackage{polski}
\usepackage{xltxtra}
\usepackage{listings}
\usepackage{multicol}
\usepackage{xcolor}
\usepackage{siunitx}
\usepackage{graphicx}

\usetheme{Singapore}

\title{Copy and paste rules --- why functions?}
\author{Adam GÅ‚owacki}
\date{April 8th, 2022}
\beamertemplatenavigationsymbolsempty

\definecolor{keywordColor}{HTML}{AF5F00}
\definecolor{commentColor}{HTML}{12488B}
\definecolor{stringColor}{HTML}{C01C28}
\newcommand{\style}[1]{\ttfamily#1}
\lstset{
  showstringspaces=false,
  basicstyle=\style{\normalsize},
  commentstyle=\color{commentColor}\textit,
  keywordstyle=\color{keywordColor}\bfseries,
  stringstyle=\color{stringColor},
  language=python
}

\begin{document}

\begin{frame}
\titlepage
\end{frame}

\section{Staff database}

\begin{frame}[fragile]
\frametitle{123456.txt}
\begin{verbatim}
Alice Green
Principal Office Assistant
Warsaw, Aleje Jerozolimskie
8900
...
\end{verbatim}
\end{frame}

\begin{frame}
\frametitle{Update the files}
\begin{enumerate}
  \item 123313: 11\% salary raise
  \item 123790: moved to Polarna street in Katowice
  \item 123856: 10\% salary raise
\end{enumerate}
\end{frame}

\begin{frame}
\frametitle{What to do}
For each person/file:
\begin{itemize}
  \item read the file contents
  \item find the right line
  \item replace the piece of information
  \item update the file contents
\end{itemize}
\end{frame}

\begin{frame}[fragile]
\lstinputlisting{code/read-write.py}
\end{frame}

\begin{frame}[fragile]
  \begin{columns}
    \begin{column}{0.5\textwidth}
      \begin{verbatim}
Alice Green
Principal Office Assistant
Warsaw, Aleje Jerozolimskie
8900
...
      \end{verbatim}
    \end{column}
    \begin{column}{0.5\textwidth}
      \lstinputlisting{code/read-salary-write.py}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/read-address-write.py}
\end{frame}

\begin{frame}[fragile]
  \begin{columns}
    \begin{column}{0.5\textwidth}
      \lstinputlisting[basicstyle=\style{\tiny}]{code/long.py}
    \end{column}
    \begin{column}{0.5\textwidth}
      % intentionally blank; to align with source code in the next frame
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  \begin{columns}
    \begin{column}{0.5\textwidth}
      \lstinputlisting[basicstyle=\style{\tiny}]{code/long.py}
    \end{column}
    \begin{column}{0.5\textwidth}
      Similar task
      \begin{itemize}
        \item 697123: 12\% salary raise
        \item 112001: 33\% salary raise
      \end{itemize}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting[basicstyle=\style{\tiny},multicols=2]{code/long-seps.py}
\end{frame}

\begin{frame}[fragile,label=longcode]
  \lstinputlisting[basicstyle=\style{\tiny},multicols=2]{code/long-seps-comments.py}
\end{frame}

\section{Functions}

\begin{frame}
  \centering
  \Huge
  Function
\end{frame}

\begin{frame}
  \centering
  \Huge
  $f(x) = x + 1$
\end{frame}

\begin{frame}
  \centering
  \Huge
  $f(x) = x + 1$

  $g(x) = 2x - x + 1$

  $h(x) = \frac{42 + x^2\cdot{}x}{x^3+42} - x + 1$
\end{frame}

\begin{frame}[fragile]
  \begin{columns}
    \begin{column}{0.5\textwidth}
      \LARGE
      $f(x) = x + 1$
    \end{column}
    \begin{column}{0.5\textwidth}
      \lstinputlisting[basicstyle=\style{\LARGE}]{code/f1.py}
    \end{column}
  \end{columns}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting[basicstyle=\style{\LARGE}]{code/f2.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting[basicstyle=\style{\LARGE}]{code/f3.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting[basicstyle=\style{\LARGE}]{code/f4.py}
\end{frame}

\section{Use functions}

\begin{frame}[fragile]
  \lstinputlisting{code/read-section.py}
  \vspace{1.5cm}
  \lstinputlisting{code/read-no-return-function.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/read-section.py}
  \vspace{1.5cm}
  \lstinputlisting{code/read-function.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/salary-section.py}
  \vspace{1.5cm}
  \lstinputlisting{code/salary-function.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/address-section.py}
  \vspace{1.5cm}
  \lstinputlisting{code/address-function.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/write-section.py}
  \vspace{1.5cm}
  \lstinputlisting{code/write-function.py}
\end{frame}

\againframe{longcode}

\begin{frame}[fragile]
  \lstinputlisting[basicstyle=\style{\tiny}]{code/functions-seps-comments.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/functions.py}
\end{frame}

\section{Pure or impure}

\begin{frame}
\centering
\Huge
Pure vs ``dirty'' functions
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/pay-employee.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/pay-employee-date.py}
\end{frame}

\begin{frame}[fragile]
  \lstinputlisting{code/pay-employee-tests.py}
\end{frame}

\begin{frame}
Why would anybody need a program that doesn't interact with him?
\end{frame}

\section{Script as a function}

\begin{frame}[fragile]
  \lstinputlisting{code/script.py}
  \vspace{1.5cm}
  \lstinputlisting[language=sh]{code/shell.txt}
\end{frame}

\section{Homework}

\begin{frame}[fragile]
  \frametitle{``Clean up'' the code using functions}
  \lstinputlisting[basicstyle=\style{\fontsize{2.5}{4}\selectfont}]{code/homework.py}
\end{frame}

\end{document}
